version: "2.0"

rules:

- rule: Say goodbye anytime the user says goodbye
  steps:
  - intent: goodbye
  - action: utter_goodbye

- rule: Say 'I am a bot' anytime the user challenges
  steps:
  - intent: bot_challenge
  - action: utter_iamabot

#- rule: The user thanks
#  steps:
#  - intent: thanks
#  - action: utter_you_are_welcome- rule: The user thanks
#  steps:
#  - intent: thanks
#  - action: utter_you_are_welcome

# Check if it is the user's first connection. Ask for his name if it is.
- rule: First bot interaction with the user
  steps:
  - intent: start_intent
  - action: action_greet
  wait_for_user_input: false

- rule: Bot offers assistance to the user after being greeted
  steps:
  - intent: greet
  - action: utter_offers_help
  - action: action_listen

- rule: Ask user for confirmation to logout
  steps:
  - intent: logout
  - action: utter_logout_confirmation

- rule: User has requested to log in and the data collection form is started
  steps:
  - intent: login
  - action: action_check_session_login
  wait_for_user_input: false

- rule: User enters his or her data in the form to log in
  condition:
  - active_loop: login_form
  steps:
  - action: login_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: action_login

- rule: User has requested to register and the data collection form is started
  steps:
  - intent: signup
  - action: action_check_session_signup
  wait_for_user_input: false

- rule: User enters his data in the form to register on the website
  condition:
  - active_loop: signup_form
  steps:
  - action: signup_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: action_signup

- rule: User enters the document to be opened
  steps:
  - active_loop: document_selection_form
  - active_loop: null
  - slot_was_set:
      - requested_slot: null
  - action: action_open_document

# change the layout
- rule: User wants to change the layout, without specifying to which one
  steps:
  - intent: change_layout
  - action: utter_change_layout

- rule: User wants to change the layout to Tree
  steps:
  - intent: change_layout_tree
  - action: utter_change_layout_tree

- rule: User wants to change the layout to Force
  steps:
  - intent: change_layout_force
  - action: utter_change_layout_force

- rule: User wants to change the layout to Radial
  steps:
  - intent: change_layout_radial
  - action: utter_change_layout_radial

- rule: User wants to change the layout to Circle Packing
  steps:
  - intent: change_layout_circle
  - action: utter_change_layout_circle

- rule: Displays in the chat the message indicated by the User (client side)
  steps:
  - intent: generate_response_message
  - action: action_generate_response_message

- rule: Displays in the chat the utter_help_glyphs message
  steps:
  - intent: generate_help_glyphs_message
  - action: utter_help_glyphs

- rule: Automatically fills slots with values passed as entities
  steps:
  - intent: set_slots
  - action: action_set_slots

# OR / AND highlighting
- rule: User wants to change the highlighting option to AND
  steps:
  - intent: switch_and
  - action: utter_switch_and

- rule: User wants to change the highlighting option to OR
  steps:
  - intent: switch_or
  - action: utter_switch_or

- rule: User wants to uncheck all highlighting filters
  steps:
  - intent: highlight_uncheck_all
  - action: utter_highlight_uncheck_all

- rule: User wants to uncheck one or more filters
  steps:
  - intent: highlight_uncheck
  - action: action_highlight_uncheck

- rule: User wants to check one or more filters
  steps:
  - intent: highlight_check
  - action: action_highlight_check

- rule: User wants to switch one or more filters
  steps:
  - intent: highlight_switch
  - action: action_highlight_switch

- rule: User wants to uncheck the last filters used
  steps:
  - intent: highlight_uncheck_last
  - action: action_highlight_uncheck_last

- rule: User wants to check the last filters used
  steps:
  - intent: highlight_check_last
  - action: action_highlight_check_last

- rule: User wants to switch the last filters used
  steps:
  - intent: highlight_switch_last
  - action: action_highlight_switch_last
# complex intent stories
# highlight (for now) longest thread, largest thread, widest thread
- rule: User wants to see the longest thread
  steps:
    - intent: longest_thread
    - action: utter_longest_thread

- rule: User wants to see the widest level/depth
  steps:
    - intent: widest_level
    - action: utter_widest_level

- rule: User wants to see the largest thread
  steps:
    - intent: largest_thread
    - action: utter_largest_thread

#highlight most toxic thread
- rule: User wants to see the most toxic thread
  steps:
    - intent: most_toxic_thread
    - action: utter_most_toxic_thread

#highlight most toxic subtree
- rule: User wants to see the most toxic subtree
  steps:
    - intent: most_toxic_subtree
    - action: utter_most_toxic_subtree

- rule: User wants to see the statistics of all the features of the tree
  steps:
    - intent: statistics_features_tree
    - action: utter_statistics_features_tree
  wait_for_user_input: false

- rule: User wants to compare the statistics of all the features of the subtrees
  steps:
    - intent: statistics_features_subtrees
    - action: utter_statistics_features_subtrees
  wait_for_user_input: false

- rule: User wants to change to dots
  steps:
    - intent: change_glyph_dots
    - action: utter_change_to_dots

- rule: User wants to change to circular
  steps:
    - intent: change_glyph_circular
    - action: utter_change_to_circular

- rule: User wants to change to  trivial
  steps:
    - intent: change_glyph_trivial
    - action: utter_change_to_trivial

- rule: ask to change glyphs
  steps:
    - intent: change_glyphs
    - action: utter_change_glyphs

- rule: User wants to know about highlights
  steps:
    - intent: help_highlight
    - action: utter_help_highlight

- rule: User want to know about what summary does
  steps:
    - intent: help_summary
    - action: utter_help_summary


- rule: User wants to know about main graph button
  steps:
    - intent: help_main_graph_barchart
    - action: utter_help_main_bar

- rule: User wants to know about sub graphs button
  steps:
    - intent: help_subtree_barchart
    - action: utter_help_subtree_bar


- rule: User wants to know about AND
  steps:
    - intent: help_AND
    - action: utter_help_AND

- rule: User wants to know about OR
  steps:
    - intent: help_OR
    - action: utter_help_OR

- rule: User wants to know about the difference of AND/OR
  steps:
    - intent: help_AND_OR
    - action: utter_help_AND_OR

- rule: check colour feature const
  steps:
    - intent: colour_feature_constructiveness
    - action: utter_colour_feature_constractive

- rule: check colour feature argumentation
  steps:
    - intent: colour_feature_argumentation
    - action: utter_colour_feature_argumentation

- rule: check colour feature sarcasm
  steps:
    - intent: colour_feature_sarcasm
    - action: utter_colour_feature_sarcasm

- rule: checck colour feature mockery
  steps:
    - intent: colour_feature_mockery
    - action: utter_colour_feature_mockery

- rule: check colour feature intolerance
  steps:
    - intent: colour_feature_intolerance
    - action: utter_colour_feature_intolerance

- rule: check colour feature improper
  steps:
    - intent: colour_feature_improper
    - action: utter_colour_feature_improper

- rule: check colour feature insult
  steps:
    - intent: colour_feature_insult
    - action: utter_colour_feature_insult

- rule: check colour feature aggressiveness
  steps:
    - intent: colour_feature_aggressiveness
    - action: utter_colour_feature_aggressiveness

- rule: check all colour features
  steps:
    - intent: check_all_colour_features
    - action: utter_check_all_colour_features

- rule: uncheck all colour features
  steps:
    - intent: uncheck_all_colour_features
    - action: utter_uncheck_all_colour_features

- rule: User ask to see a colour feature withou specifiying which one
  steps:
    - intent: show_colour_feature
    - action: utter_which_colour_feature

- rule: Ask the user to rephrase whenever they send a message with low NLU confidence
  steps:
  - intent: nlu_fallback
  - action: utter_please_rephrase


#- rule: user wants to know what bot can do
#  steps:
#    - intent: help_what_can_you_do
#    - action: utter_help_what_can_you_do


